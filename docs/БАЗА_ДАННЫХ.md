# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Vakansiya.AZ

## üóÑ –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–°–£–ë–î:** PostgreSQL 15+ (—á–µ—Ä–µ–∑ Supabase)
**–ö–æ–¥–∏—Ä–æ–≤–∫–∞:** UTF-8
**–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:** UTC (—Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º –≤ Asia/Baku –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ)

## üìä –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
1. **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
2. **companies** - –∫–æ–º–ø–∞–Ω–∏–∏-—Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–∏
3. **vacancies** - –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏
4. **short_jobs** - –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã
5. **short_job_responses** - –æ—Ç–∫–ª–∏–∫–∏ –Ω–∞ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã
6. **payments** - –ø–ª–∞—Ç–µ–∂–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
7. **user_activity** - –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
8. **email_marketing** - –±–∞–∑–∞ –¥–ª—è email —Ä–∞—Å—Å—ã–ª–æ–∫

---

## üìã –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

### 1. users (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

| –ü–æ–ª–µ | –¢–∏–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|-------------|----------|
| id | uuid | PRIMARY KEY, DEFAULT uuid_generate_v4() | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| email | text | UNIQUE, NOT NULL | Email –∞–¥—Ä–µ—Å |
| name | text | - | –ü–æ–ª–Ω–æ–µ –∏–º—è |
| avatar_url | text | - | URL –∞–≤–∞—Ç–∞—Ä–∞ –∏–∑ Google |
| phone | text | - | –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ |
| role | enum | NOT NULL, DEFAULT 'user' | –†–æ–ª—å: 'user', 'employer', 'admin' |
| balance | numeric(10,2) | DEFAULT 0 | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å (–¥–ª—è –±—É–¥—É—â–µ–≥–æ) |
| created_at | timestamptz | DEFAULT now() | –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ |
| updated_at | timestamptz | DEFAULT now() | –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- PRIMARY KEY (id)
- UNIQUE INDEX (email)
- INDEX (role)

**–°–≤—è–∑–∏:**
- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –∫–æ–º–ø–∞–Ω–∏–π
- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –≤–∞–∫–∞–Ω—Å–∏–π
- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–µ–π

---

### 2. companies (–ö–æ–º–ø–∞–Ω–∏–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏—è—Ö-—Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è—Ö

| –ü–æ–ª–µ | –¢–∏–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|-------------|----------|
| id | uuid | PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| user_id | uuid | FOREIGN KEY ‚Üí users.id, NOT NULL | –í–ª–∞–¥–µ–ª–µ—Ü –∫–æ–º–ø–∞–Ω–∏–∏ |
| name | text | NOT NULL | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ |
| description | text | - | –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ |
| logo_url | text | - | URL –ª–æ–≥–æ—Ç–∏–ø–∞ |
| website | text | - | –°–∞–π—Ç –∫–æ–º–ø–∞–Ω–∏–∏ |
| city | text | - | –ì–æ—Ä–æ–¥ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è |
| address | text | - | –ê–¥—Ä–µ—Å –æ—Ñ–∏—Å–∞ |
| phone | text | - | –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω |
| email | text | - | Email –∫–æ–º–ø–∞–Ω–∏–∏ |
| created_at | timestamptz | DEFAULT now() | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| updated_at | timestamptz | DEFAULT now() | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- PRIMARY KEY (id)
- INDEX (user_id)
- INDEX (city)

**–°–≤—è–∑–∏:**
- –û–¥–Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è ‚Üí –º–Ω–æ–≥–æ –≤–∞–∫–∞–Ω—Å–∏–π

---

### 3. vacancies (–í–∞–∫–∞–Ω—Å–∏–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏ –æ—Ç —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π

| –ü–æ–ª–µ | –¢–∏–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|-------------|----------|
| id | uuid | PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| company_id | uuid | FOREIGN KEY ‚Üí companies.id | –ö–æ–º–ø–∞–Ω–∏—è-—Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å |
| user_id | uuid | FOREIGN KEY ‚Üí users.id, NOT NULL | –ê–≤—Ç–æ—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏—è |
| title | text | NOT NULL | –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∞–∫–∞–Ω—Å–∏–∏ |
| description | text | NOT NULL | –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ |
| short_description | text | - | –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è) |
| requirements | text | - | –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞–Ω–¥–∏–¥–∞—Ç—É |
| responsibilities | text | - | –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ |
| benefits | text | - | –£—Å–ª–æ–≤–∏—è –∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ |
| salary_min | integer | - | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞ (AZN) |
| salary_max | integer | - | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞ (AZN) |
| salary_hidden | boolean | DEFAULT false | –°–∫—Ä—ã—Ç—å –∑–∞—Ä–ø–ª–∞—Ç—É |
| city | text | NOT NULL | –ì–æ—Ä–æ–¥ |
| address | text | - | –ê–¥—Ä–µ—Å —Ä–∞–±–æ—Ç—ã |
| category | text | NOT NULL | –ö–∞—Ç–µ–≥–æ—Ä–∏—è (IT, Tibb, Satƒ±≈ü –∏ —Ç.–¥.) |
| work_type | enum | NOT NULL | –¢–∏–ø: 'tam', 'yarƒ±m', 'uzaqdan' |
| experience_required | text | - | –¢—Ä–µ–±—É–µ–º—ã–π –æ–ø—ã—Ç |
| education_required | text | - | –¢—Ä–µ–±—É–µ–º–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ |
| contact_phone | text | - | –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω |
| contact_email | text | - | –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π email |
| is_paid | boolean | DEFAULT false | –ü–ª–∞—Ç–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ |
| featured | boolean | DEFAULT false | –í—ã–¥–µ–ª–µ–Ω–Ω–æ–µ (—Ç–æ–ø) |
| status | enum | DEFAULT 'draft' | 'draft', 'active', 'expired', 'pending_payment', 'archived' |
| views_count | integer | DEFAULT 0 | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ |
| source | text | DEFAULT 'manual' | –ò—Å—Ç–æ—á–Ω–∏–∫: 'manual', 'boss.az', 'tap.az', 'jobsearch.az' –∏ —Ç.–¥. |
| source_url | text | - | URL –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏ (–¥–ª—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö) |
| imported_at | timestamptz | - | –î–∞—Ç–∞ –∏–º–ø–æ—Ä—Ç–∞ (–¥–ª—è –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–∞) |
| ai_rewritten | boolean | DEFAULT false | –ë—ã–ª–∞ –ª–∏ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞/—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ AI |
| ai_model_used | text | - | –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ AI (deepseek-chat-v3, glm-4.5 –∏ —Ç.–¥.) |
| expires_at | timestamptz | - | –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è |
| created_at | timestamptz | DEFAULT now() | –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ |
| updated_at | timestamptz | DEFAULT now() | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- PRIMARY KEY (id)
- INDEX (company_id)
- INDEX (user_id)
- INDEX (city)
- INDEX (category)
- INDEX (status)
- INDEX (source) - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É
- INDEX (ai_rewritten) - –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ AI-–æ–±—Ä–∞–±–æ—Ç–∫–∏
- INDEX (created_at DESC)
- FULLTEXT INDEX (title, description) - –¥–ª—è –ø–æ–∏—Å–∫–∞

**–°–≤—è–∑–∏:**
- –û–¥–Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—è ‚Üí –æ–¥–∏–Ω –ø–ª–∞—Ç–µ–∂ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

### 4. short_jobs (–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–¥—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ –¥–µ–Ω—å/–Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤

| –ü–æ–ª–µ | –¢–∏–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|-------------|----------|
| id | uuid | PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| user_id | uuid | FOREIGN KEY ‚Üí users.id, NOT NULL | –ê–≤—Ç–æ—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏—è |
| title | text | NOT NULL | –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã |
| description | text | NOT NULL | –î–µ—Ç–∞–ª–∏ —Ä–∞–±–æ—Ç—ã |
| city | text | NOT NULL | –ì–æ—Ä–æ–¥ |
| address | text | - | –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–¥—Ä–µ—Å |
| category | text | NOT NULL | –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∞–±–æ—Ç—ã |
| date | date | NOT NULL | –î–∞—Ç–∞ —Ä–∞–±–æ—Ç—ã |
| start_time | time | - | –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ |
| end_time | time | - | –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è |
| wage | numeric(10,2) | NOT NULL | –û–ø–ª–∞—Ç–∞ (AZN) |
| contact_phone | text | NOT NULL | –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏ |
| contact_name | text | - | –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ |
| is_paid | boolean | DEFAULT false | –ü–ª–∞—Ç–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ |
| status | enum | DEFAULT 'active' | 'active', 'done', 'expired', 'cancelled' |
| views_count | integer | DEFAULT 0 | –ü—Ä–æ—Å–º–æ—Ç—Ä—ã |
| created_at | timestamptz | DEFAULT now() | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| updated_at | timestamptz | DEFAULT now() | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- PRIMARY KEY (id)
- INDEX (user_id)
- INDEX (city)
- INDEX (category)
- INDEX (date)
- INDEX (status)

**–°–≤—è–∑–∏:**
- –û–¥–Ω–∞ —Ä–∞–±–æ—Ç–∞ ‚Üí –º–Ω–æ–≥–æ –æ—Ç–∫–ª–∏–∫–æ–≤

---

### 5. short_job_responses (–û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–∫–ª–∏–∫–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ –ø–æ–¥—Ä–∞–±–æ—Ç–∫–∏

| –ü–æ–ª–µ | –¢–∏–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|-------------|----------|
| id | uuid | PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| job_id | uuid | FOREIGN KEY ‚Üí short_jobs.id, NOT NULL | ID —Ä–∞–±–æ—Ç—ã |
| user_id | uuid | FOREIGN KEY ‚Üí users.id, NOT NULL | ID –æ—Ç–∫–ª–∏–∫–Ω—É–≤—à–µ–≥–æ—Å—è |
| message | text | - | –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ |
| phone | text | - | –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω |
| status | enum | DEFAULT 'pending' | 'pending', 'approved', 'declined' |
| created_at | timestamptz | DEFAULT now() | –î–∞—Ç–∞ –æ—Ç–∫–ª–∏–∫–∞ |

**–ò–Ω–¥–µ–∫—Å—ã:**
- PRIMARY KEY (id)
- INDEX (job_id)
- INDEX (user_id)
- UNIQUE INDEX (job_id, user_id) - –æ–¥–∏–Ω –æ—Ç–∫–ª–∏–∫ –æ—Ç —é–∑–µ—Ä–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É

---

### 6. payments (–ü–ª–∞—Ç–µ–∂–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

| –ü–æ–ª–µ | –¢–∏–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|-------------|----------|
| id | uuid | PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| user_id | uuid | FOREIGN KEY ‚Üí users.id, NOT NULL | –ü–ª–∞—Ç–µ–ª—å—â–∏–∫ |
| vacancy_id | uuid | FOREIGN KEY ‚Üí vacancies.id | ID –≤–∞–∫–∞–Ω—Å–∏–∏ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ) |
| short_job_id | uuid | FOREIGN KEY ‚Üí short_jobs.id | ID –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã |
| amount | numeric(10,2) | NOT NULL | –°—É–º–º–∞ |
| currency | text | DEFAULT 'AZN' | –í–∞–ª—é—Ç–∞ |
| method | text | - | –°–ø–æ—Å–æ–±: 'agent', 'stripe', 'portmanat', 'cash' |
| transaction_id | text | - | ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Ç –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã |
| status | enum | DEFAULT 'pending' | 'pending', 'success', 'failed', 'refunded' |
| notes | text | - | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞/–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |
| created_at | timestamptz | DEFAULT now() | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| completed_at | timestamptz | - | –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- PRIMARY KEY (id)
- INDEX (user_id)
- INDEX (vacancy_id)
- INDEX (short_job_id)
- INDEX (status)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- CHECK (vacancy_id IS NOT NULL OR short_job_id IS NOT NULL) - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–≤—è–∑—å —Ö–æ—Ç—è –±—ã —Å –æ–¥–Ω–∏–º —Ç–∏–ø–æ–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è

---

### 7. user_activity (–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞

| –ü–æ–ª–µ | –¢–∏–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|-------------|----------|
| id | uuid | PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| user_id | uuid | FOREIGN KEY ‚Üí users.id, NOT NULL | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| vacancy_id | uuid | FOREIGN KEY ‚Üí vacancies.id | ID –≤–∞–∫–∞–Ω—Å–∏–∏ |
| short_job_id | uuid | FOREIGN KEY ‚Üí short_jobs.id | ID –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã |
| action | enum | NOT NULL | 'view', 'contact_viewed', 'applied', 'saved' |
| metadata | jsonb | - | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–±—Ä–∞—É–∑–µ—Ä, –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ —Ç.–¥.) |
| created_at | timestamptz | DEFAULT now() | –í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- PRIMARY KEY (id)
- INDEX (user_id)
- INDEX (vacancy_id)
- INDEX (action)
- INDEX (created_at DESC)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- Email-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º

---

### 8. email_marketing (–ë–∞–∑–∞ –¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ email-—Ä–∞—Å—Å—ã–ª–∫–∞–º–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

| –ü–æ–ª–µ | –¢–∏–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|-------------|----------|
| id | uuid | PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| user_id | uuid | FOREIGN KEY ‚Üí users.id | –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º |
| email | text | UNIQUE, NOT NULL | Email –∞–¥—Ä–µ—Å |
| name | text | - | –ò–º—è |
| city | text | - | –ì–æ—Ä–æ–¥ (–∏–∑ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤) |
| category_interest | text[] | - | –ú–∞—Å—Å–∏–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ |
| subscribed | boolean | DEFAULT true | –ü–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫–∏ |
| unsubscribed_at | timestamptz | - | –î–∞—Ç–∞ –æ—Ç–ø–∏—Å–∫–∏ |
| last_sent_at | timestamptz | - | –ü–æ—Å–ª–µ–¥–Ω—è—è –æ—Ç–ø—Ä–∞–≤–∫–∞ |
| open_count | integer | DEFAULT 0 | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç–∏–π –ø–∏—Å–µ–º |
| click_count | integer | DEFAULT 0 | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤ |
| created_at | timestamptz | DEFAULT now() | –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- PRIMARY KEY (id)
- UNIQUE INDEX (email)
- INDEX (user_id)
- INDEX (subscribed)
- INDEX (category_interest) - GIN –∏–Ω–¥–µ–∫—Å –¥–ª—è –º–∞—Å—Å–∏–≤–∞

---

## üîó –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

### –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–≤—è–∑–µ–π (Entity Relationship):

```
users (1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> (*) companies
  ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> (*) vacancies
  ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> (*) short_jobs
  ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> (*) short_job_responses
  ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> (*) payments
  ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> (*) user_activity
  ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> (1) email_marketing

companies (1) ‚îÄ‚îÄ> (*) vacancies

vacancies (1) ‚îÄ‚îÄ> (0..1) payments

short_jobs (1) ‚îÄ‚îÄ> (*) short_job_responses
              ‚îî‚îÄ‚îÄ> (0..1) payments

user_activity (*) ‚îÄ‚îÄ> (1) vacancies
                 ‚îî‚îÄ‚îÄ> (1) short_jobs
```

---

## üîí Row Level Security (RLS)

### –ü–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã:

#### users
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ—é –∑–∞–ø–∏—Å—å
- –û–±–Ω–æ–≤–ª—è—Ç—å –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —Å–µ–±—è
- –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç –≤—Å–µ—Ö

#### companies
- –ü—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–∞–Ω–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º
- –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∏–ª–∏ –∞–¥–º–∏–Ω–æ–º

#### vacancies
- –ü—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π (status = 'active')
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º
- –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∏–ª–∏ –∞–¥–º–∏–Ω–æ–º

#### short_jobs
- –ü—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º

#### short_job_responses
- –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç–∫–ª–∏–∫–æ–≤ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–æ–º —Ä–∞–±–æ—Ç—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∫–ª–∏–∫–∞ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏
- –û–¥–∏–Ω –æ—Ç–∫–ª–∏–∫ –Ω–∞ —Ä–∞–±–æ—Ç—É –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### payments
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ API
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–æ–º/–∞–≥–µ–Ω—Ç–æ–º

#### user_activity
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–æ–º –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

#### email_marketing
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–æ–º
- –û—Ç–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω

---

## üéØ –ò–Ω–¥–µ–∫—Å—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:

1. **–ü–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π:**
   - Full-text –∏–Ω–¥–µ–∫—Å –Ω–∞ (title, description)
   - Composite –∏–Ω–¥–µ–∫—Å –Ω–∞ (city, category, status)
   - –ò–Ω–¥–µ–∫—Å –Ω–∞ created_at –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
   - –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Å–µ –ø–æ–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ (city, category, work_type)
   - Partial –∏–Ω–¥–µ–∫—Å —Ç–æ–ª—å–∫–æ –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏

3. **–°–≤—è–∑–∏:**
   - Foreign key –∏–Ω–¥–µ–∫—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö —Å–≤—è–∑–µ–π

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤:

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ prepared statements
- Pagination —á–µ—Ä–µ–∑ cursor-based –ø–æ–¥—Ö–æ–¥
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- Materialized views –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (–±—É–¥—É—â–µ–µ)

---

## üóÇ Enum —Ç–∏–ø—ã

### role
```sql
CREATE TYPE user_role AS ENUM ('user', 'employer', 'admin');
```

### work_type
```sql
CREATE TYPE work_type AS ENUM ('tam', 'yarƒ±m', 'uzaqdan');
```

### vacancy_status
```sql
CREATE TYPE vacancy_status AS ENUM ('draft', 'active', 'expired', 'pending_payment', 'archived');
```

### job_status
```sql
CREATE TYPE job_status AS ENUM ('active', 'done', 'expired', 'cancelled');
```

### response_status
```sql
CREATE TYPE response_status AS ENUM ('pending', 'approved', 'declined');
```

### payment_status
```sql
CREATE TYPE payment_status AS ENUM ('pending', 'success', 'failed', 'refunded');
```

### activity_action
```sql
CREATE TYPE activity_action AS ENUM ('view', 'contact_viewed', 'applied', 'saved');
```

---

## üîÑ –¢—Ä–∏–≥–≥–µ—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ updated_at
–î–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü —Å –ø–æ–ª–µ–º updated_at

### 2. –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
–ü—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–∏ 'view' –≤ user_activity ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å views_count

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–π
Scheduled job –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è status –Ω–∞ 'expired' –ø–æ—Å–ª–µ expires_at

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ category_interest
–ü—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤ –∏–Ω—Ç–µ—Ä–µ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 5. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç
–ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ date –≤ short_jobs –Ω–µ –≤ –ø—Ä–æ—à–ª–æ–º

---

## üì¶ –ú–∏–≥—Ä–∞—Ü–∏–∏

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–π:

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Supabase Migrations
2. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã
3. Rollback –ø–ª–∞–Ω –¥–ª—è –∫–∞–∂–¥–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ staging –æ–∫—Ä—É–∂–µ–Ω–∏–∏
5. Zero-downtime deployments

### Naming convention:
```
YYYYMMDDHHMMSS_description_of_change.sql
```

---

## üíæ Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã** - Supabase –¥–µ–ª–∞–µ—Ç daily backups
2. **Point-in-time recovery** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
3. **Manual exports** - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–æ—Ä—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **Disaster recovery plan** - –ø–ª–∞–Ω –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–±–æ—è

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î

### –ü—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏:

1. **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ** - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –º–æ—â–Ω–æ—Å—Ç–∏ Supabase –ø–ª–∞–Ω–∞
2. **Read replicas** - –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
3. **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü (user_activity)
4. **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∞—Ä—Ö–∏–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
5. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - Redis –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
